<!-- ‚úÖ ÏÇ≠Ï†ú Î™®Îã¨ -->
<div id="deleteModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 1000;">
    <div style="background: white; padding: 32px; border-radius: 12px; width: 400px; text-align: center;">
        <h2 style="margin-bottom: 16px; color: #0019a5;">Î¨∏Ìï≠ ÏÇ≠Ï†ú</h2>
        <p style="margin-bottom: 24px;">Ï†ïÎßêÎ°ú Ïù¥ Î¨∏Ìï≠ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?</p>

        <!-- üî• ÏÇ≠Ï†ú ÏöîÏ≤≠ Ìèº -->
        <form id="deleteForm" method="post">
            <input type="hidden" name="_method" value="delete" />
            <!-- ‚úÖ category ÌååÎùºÎØ∏ÌÑ∞ hiddenÏúºÎ°ú Ï†ÑÎã¨ -->
            <input type="hidden" name="category" id="deleteCategoryInput" />

            <div style="display: flex; justify-content: center; gap: 12px;">
                <button type="submit" style="padding: 10px 20px; background-color: #dc2626; color: white; border: none; border-radius: 999px;">ÏÇ≠Ï†ú</button>
                <button type="button" onclick="closeDeleteModal()" style="padding: 10px 20px; background-color: #ccc; color: #333; border: none; border-radius: 999px;">Ï∑®ÏÜå</button>
            </div>
        </form>
    </div>
</div>

<!-- ‚úÖ Î™®Îã¨ Í¥ÄÎ†® JS -->
<script>
    let openDropdown = null;

    function toggleDropdown(button) {
        const dropdown = button.querySelector('.dropdown');
        if (openDropdown && openDropdown !== dropdown) {
            openDropdown.style.display = 'none';
        }
        if (dropdown.style.display === 'flex') {
            dropdown.style.display = 'none';
            openDropdown = null;
        } else {
            dropdown.style.display = 'flex';
            openDropdown = dropdown;
        }
    }

    document.addEventListener('click', function (e) {
        if (!e.target.closest('.kebab-menu')) {
            if (openDropdown) {
                openDropdown.style.display = 'none';
                openDropdown = null;
            }
        }
    });

    // ‚úÖ ÏÇ≠Ï†ú Î™®Îã¨ Ïó¥Í∏∞ (ÏÜçÏÑ± Í∏∞Î∞ò)
    function showDeleteModalFromAttr(element) {
        const id = element.getAttribute("data-id");
        const category = element.getAttribute("data-category");
        showDeleteModal(id, category);
    }

    // ‚úÖ ÏÇ≠Ï†ú Î™®Îã¨ Ïó¥Í∏∞
    function showDeleteModal(questionId, category) {
        const modal = document.getElementById('deleteModal');
        const form = document.getElementById('deleteForm');
        const categoryInput = document.getElementById('deleteCategoryInput');

        // form ÏÑ§Ï†ï
        form.action = `/admin/questions/${questionId}/delete`;
        form.method = "post";

        // category ÏÑ§Ï†ï
        categoryInput.value = category;

        console.log("‚úÖ form.action:", form.action);
        console.log("‚úÖ form.method:", form.method);

        modal.style.display = 'flex';
    }

    // ‚úÖ ÏÇ≠Ï†ú Î™®Îã¨ Îã´Í∏∞
    function closeDeleteModal() {
        document.getElementById('deleteModal').style.display = 'none';
    }

</script>
